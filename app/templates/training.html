{% extends "base.html" %}

{% block content %}
<div class="space-y-8">
    <div>
        <h1 class="text-3xl font-bold text-white">Tr√§ning</h1>
        <p class="mt-2 text-lg text-gray-400">Logga din dagliga fysiska aktivitet.</p>
    </div>

    <!-- Sektion: Fight Rond -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-white mb-4">ü•ä Fight Rond (3 min)</h2>
        <form method="POST" action="{{ url_for('main.training') }}" class="flex items-center space-x-4">
            <div class="flex-grow">
                <label for="bpm" class="sr-only">BPM</label>
                <input type="number" name="bpm" id="bpm" required class="block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-teal-500 focus:border-teal-500" placeholder="Puls efter rond">
            </div>
            <button type="submit" name="log_fight_rond" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline">
                Logga Rond
            </button>
        </form>
        {% if fight_rond_logs %}
            <div class="mt-4">
                <h4 class="text-md font-semibold text-gray-300">Dagens Ronder:</h4>
                <p class="text-sm text-gray-400">
                    {% for log in fight_rond_logs %}
                        <span class="inline-block bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-white mr-2 mb-2">{{ log.bpm }} BPM</span>
                    {% endfor %}
                </p>
            </div>
        {% endif %}
    </div>

    <!-- Sektion: Steg -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-white mb-4">üö∂‚Äç‚ôÇÔ∏è Steg</h2>
        <form method="POST" action="{{ url_for('main.training') }}" class="space-y-4">
            <!-- TODO: L√§gg till CSRF token och formul√§rf√§lt fr√•n WTForms -->
            <div>
                <label for="steps" class="block text-sm font-medium text-gray-300">Antal steg</label>
                <input type="number" name="steps" id="steps" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-teal-500 focus:border-teal-500" placeholder="t.ex. 10000">
            </div>
            <button type="submit" name="log_steps" class="w-full md:w-auto bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline">
                Logga Steg
            </button>
        </form>
        {% if step_log %}
            <div class="mt-4">
                <h4 class="text-md font-semibold text-gray-300">Dagens Steg:</h4>
                <p class="text-lg text-white font-bold">{{ step_log.steps }}</p>
            </div>
        {% endif %}
    </div>

    <!-- Sektion: Kondition -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-white mb-4">‚ù§Ô∏è Kondition</h2>
         <form method="POST" action="{{ url_for('main.training') }}" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="avg_bpm" class="block text-sm font-medium text-gray-300">Puls (BPM)</label>
                    <input type="number" name="avg_bpm" id="avg_bpm" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-teal-500 focus:border-teal-500" placeholder="t.ex. 140">
                </div>
                <div>
                    <label for="duration_string" class="block text-sm font-medium text-gray-300">Tid (min:sek)</label>
                    <input type="text" name="duration_string" id="duration_string" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-teal-500 focus:border-teal-500" placeholder="t.ex. 9:34">
                </div>
                <div>
                    <label for="distance_km" class="block text-sm font-medium text-gray-300">Distans (km)</label>
                    <input type="number" step="0.01" name="distance_km" id="distance_km" class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm text-white focus:ring-teal-500 focus:border-teal-500" placeholder="Valfritt">
                </div>
            </div>
            <p class="text-gray-400 text-sm">Ber√§knade kalorier kommer att visas efter loggning.</p>
            <button type="submit" name="log_cardio" class="w-full md:w-auto bg-teal-600 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline">
                Logga Konditionspass
            </button>
        </form>
        {% if cardio_logs %}
            <div class="mt-4">
                <h4 class="text-md font-semibold text-gray-300">Dagens Konditionspass:</h4>
                <ul class="list-disc list-inside text-gray-400 space-y-1">
                    {% for log in cardio_logs %}
                        {% set minutes = log.duration_seconds // 60 %}
                        {% set seconds = log.duration_seconds % 60 %}
                        {% set pace_minutes = (log.duration_seconds / log.distance_km) // 60 if log.distance_km else 0 %}
                        {% set pace_seconds = (log.duration_seconds / log.distance_km) % 60 if log.distance_km else 0 %}
                        <li>
                            {{ minutes }}:{{ "%02d"|format(seconds) }} min
                            {% if log.distance_km %}
                                - {{ log.distance_km }} km 
                                <span class="text-teal-400 font-bold">({{ "%.0f"|format(pace_minutes) }}:{{ "%02d"|format(pace_seconds) }} min/km)</span>
                            {% endif %}
                            - {{ log.avg_bpm }} BPM ({{ log.calories_burned }} kcal)
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </div>

    <!-- Sektion: Styrkelyft -->
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-white mb-4">üèãÔ∏è Styrkelyft</h2>
        <p class="text-gray-400">Funktion f√∂r att logga set, reps och vikt kommer snart.</p>
    </div>
</div>
{% endblock %} 